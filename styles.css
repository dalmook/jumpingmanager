/* =========================
File: styles.css (iOS-like · bright & cute · responsive)
========================= */

:root{
  /* Light pastel iOS-like palette */
  --bg:#fdfcff;
  --fg:#1d2233;
  --muted:#8b8fa2;

  --card:#ffffff;
  --line:#eef0f6;

  --primary:#6b8bff;   /* iOS 파스텔 블루 */
  --ghost:#f2f4ff;
  --warn:#ffd58c;
  --accent:#93e7c1;    /* 민트 */

  --danger:#ff89a1;
  --shadow: 0 10px 24px rgba(40,60,160,.12);
  --radius: 18px;

  --safe-top: env(safe-area-inset-top);
  --safe-bottom: env(safe-area-inset-bottom);
}

/* Base */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-rounded, "SF Pro Rounded", system-ui, -apple-system, Segoe UI, Roboto, Arial;
  color:var(--fg); background: var(--bg);
}

/* iOS Header */
.ios-header{
  position:sticky; top:0; z-index:1000;
  backdrop-filter: saturate(180%) blur(16px);
  background: linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.7));
  border-bottom:1px solid var(--line);
}
.safe-pad{ height: calc(var(--safe-top, 0px)); }
.header-inner{ padding: 10px 16px 12px; }
.header-top{ display:flex; justify-content:space-between; align-items:flex-start; gap:12px; flex-wrap:wrap }
.brand{ display:flex; align-items:center; gap:8px }
.logo-dot{ width:12px; height:12px; border-radius:50%; background:linear-gradient(135deg,#7be0ff,#6b8bff) }
.brand-text{ font-size:15px; font-weight:800; color:#5860b0 }
.large-title{ margin:6px 0 2px; font-size:28px; font-weight:900; letter-spacing:.2px }
.subtitle{ margin:0; color:var(--muted); font-size:13px }

/* Auth */
.auth-row{ display:flex; gap:8px; align-items:center; flex-wrap:wrap }
.auth-row input{
  flex:1; min-width:220px; padding:12px 14px; border-radius:14px;
  border:1px solid var(--line); background:#fff;
  box-shadow: var(--shadow);
}
.btn{ padding:12px 16px; border-radius:14px; border:0; background:var(--ghost); color:#445; font-weight:800; box-shadow: var(--shadow) }
.btn.primary{ background:var(--primary); color:#fff }
.btn.ghost{ background:var(--ghost); color:#5a63c0 }
.btn.warn{ background:var(--warn); color:#5a4100 }
.btn.danger{ background:var(--danger); color:#4a0612 }
.btn.small{ padding:8px 10px; border-radius:10px; font-size:13px }
.hidden{ display:none }
.muted{ color:var(--muted) }

/* App Shell */
.app-shell{ max-width:1180px; margin:0 auto; padding: 16px clamp(12px, 3vw, 20px) }

/* Cards & Panels */
.panel{ background:transparent; padding:0; margin:16px 0 }
.card{
  background:var(--card); border:1px solid var(--line); border-radius:var(--radius);
  box-shadow: var(--shadow); padding:16px;
}
.card.glass{
  background:rgba(255,255,255,.7);
  backdrop-filter: saturate(180%) blur(12px);
}
.section-head h2{ margin:0 0 6px; font-size:18px; font-weight:900 }
.section-card{ background:#fff; border:1px solid var(--line); border-radius:16px; padding:14px; box-shadow: var(--shadow); margin-top:12px }
.section-row{ display:flex; align-items:center; justify-content:space-between; gap:12px }

/* Segmented */
.segmented{ display:inline-flex; border:1px solid var(--line); border-radius:999px; overflow:hidden; background:#fff; box-shadow: var(--shadow) }
.segmented .seg{
  padding:10px 14px; border:0; background:transparent; font-weight:800; color:#667;
}
.segmented .seg.on{ background:var(--ghost); color:#435; }

/* Admin 2-column */
.admin-grid{
  display:grid; grid-template-columns: 360px 1fr; gap:16px; align-items:start; margin-top:12px;
}
.stick-left{ position:sticky; top:calc(10px + var(--safe-top,0px)); }

/* Search & Quick Register */
.search-row{ display:flex; gap:8px; align-items:center; flex-wrap:wrap }
.quick-register details{
  margin-top:10px; background:#fff; border:1px solid var(--line);
  border-radius:14px; padding:10px 12px; box-shadow: var(--shadow);
}
.quick-register summary{ cursor:pointer; font-weight:800; color:#5a63c0 }

/* Grids */
.grid{ display:grid; grid-template-columns:1fr 1fr; gap:10px }
.grid.two{ grid-template-columns:1fr 1fr }
/* 빠른 등록/수정 섹션은 칸 폭이 좁아지면 2칸/1칸으로 자동 줄어듦 */
.quick-register .grid.three{
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
}
/* 인풋 가로폭 보장 */
.quick-register input,
.quick-register select { width:100%; }

.grid button{ grid-column: span 1 }
.row{ display:flex; gap:8px; align-items:center }
.wrap{ flex-wrap:wrap }
.gap8{ gap:8px }
.mt8{ margin-top:8px } .mt16{ margin-top:16px }
.w110{ width:110px }

/* List */
.list{ display:grid; gap:8px; margin-top:8px }
.item{
  padding:12px 14px; border:1px solid var(--line); border-radius:14px; background:#fff;
  display:flex; justify-content:space-between; align-items:center;
  transition:.16s transform ease, .16s box-shadow ease;
}
.item:hover{ transform: translateY(-2px); box-shadow: var(--shadow) }
.list.small .item{ padding:10px; font-size:14px }

/* Member Card */
.member-card{ display:flex; flex-direction:column; gap:16px }
.member-card.compact{ gap:12px }
.member-head{ display:flex; justify-content:space-between; gap:16px; align-items:flex-start }
.m-name{ font-size:22px; font-weight:900 }

.stats{ display:flex; gap:10px; flex-wrap:wrap }
.stat{
  background:#fff; border:1px solid var(--line); border-radius:999px; padding:10px 14px; min-width:120px;
  box-shadow: var(--shadow);
}
.stat.pill{ border-radius:999px }
.stat .label{ color:var(--muted); font-size:12px; font-weight:700; text-transform:uppercase; letter-spacing:.5px }
.stat .value{ font-weight:900; font-size:20px }

/* Progress Dots (FIXED) */
.progress{ padding:4px 0 }

/* 손님 화면: 하트 줄 */
#selfDots.dots{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:4px;
}

/* 관리자 화면: 게이지 바(10칸 grid) */
#stampDots.dots{
  display:grid;
  grid-template-columns: repeat(10, 1fr);
  gap:6px;
}

/* 게이지 점(관리자) */
.dot{
  width:100%;
  height:14px;
  border-radius:8px;
  background:#f2f4ff;
  border:1px solid var(--line);
}
.dot.on{ background:var(--accent); }

/* 하트(손님) */
.stamp{
  font-size: clamp(18px, 5.5vw, 28px);
  line-height: 1;
  display:block;
  margin: 2px;
}


  /* 관리자 상세 패널 게이지는 예전처럼 grid */
#stampDots.dots{
  display:grid;
  grid-template-columns: repeat(10, 1fr);
  gap:6px;
}

/* 점(게이지 바) 너비 보장 */
.dot{
  width:100%;
  height:14px;
  border-radius:8px;
  background:#f2f4ff;        /* 밝은 바탕 */
  border:1px solid var(--line);
}
.dot.on{ background:var(--accent); }

/* Inputs */
input,select{
  padding:12px 14px; border-radius:14px; border:1px solid var(--line); background:#fff; color:var(--fg); box-shadow: var(--shadow);
}

/* Danger Zone */
.danger-zone{ background:#fff2f4; border:1px solid #ffe1e6; border-radius:16px }

/* FAB (모바일/태블릿) */
.fab-area{ position:fixed; right:16px; bottom: calc(16px + var(--safe-bottom, 0px)); z-index:999 }
.fab{
  width:56px; height:56px; border-radius:50%; border:0; background:linear-gradient(135deg,#8ee0ff,#6b8bff); color:#fff; font-size:28px; font-weight:900;
  box-shadow: 0 14px 28px rgba(80,100,200,.28);
}

/* iOS style card for memberSelf */
.ios-card{
  border-radius:24px; overflow:hidden; padding:0;
}
.ios-card .ios-title{
  padding: 16px 16px 0; display:flex; justify-content:space-between; align-items:center;
}
#selfQR canvas, #selfQR img{
  display:block;
  width:72px; height:72px;  /* 위에서 지정한 사이즈와 동일 */
  border-radius:12px;
  box-shadow: var(--shadow);
  background:#fff;
}

.ios-card .title-main{ font-size:22px; font-weight:900 }
.mini-pill{ background:#eef3ff; color:#5460b8; border-radius:999px; padding:6px 10px; font-weight:800; font-size:12px }
#selfCard.member-card.compact{
  background: linear-gradient(180deg,#fff, #f9faff 60%, #f6f8ff);
  border-top:1px solid var(--line); padding:16px;
}

/* 손님 요약 박스 */
/* 손님 요약 박스 */
.summary-box{
  display:flex;
  flex-direction:column;   /* 세로 3줄 배치 */
  gap:4px;
  padding:12px;
  border:1px solid var(--line);
  border-radius:14px;
  background:#fff;
  box-shadow: var(--shadow);
}

/* 1줄: 이름 + 스탬프 */
.summary-row.top{
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.summary-row.top .summary-title{
  font-size:18px;
  font-weight:900;
}
.summary-row.top .summary-badge{
  padding:6px 10px;
  border-radius:12px;
  background:#eef3ff;
  color:#5460b8;
  font-weight:900;
  font-size:14px;
}

/* 2줄: 전화번호 · 팀명 */
.summary-row.mid{
  font-size:13px;
  color:var(--muted);
  white-space:nowrap;
}

/* 3줄: 무료권/평일/슬러시 */
.summary-row.bottom{
  display:flex;
  gap:12px;
  font-size:13px;
  font-weight:700;
  color:#444;
  white-space:nowrap;
}
.summary-row.bottom b{
  color:#6b8bff;
  font-weight:900;
}

/* 팽귄 도장 격자 (2행×5열) */
.stamp-grid{
  margin-top:14px;
  display:grid; grid-template-columns: repeat(5, 1fr); gap:14px;
}
.stamp-slot{
  aspect-ratio:1/1; border-radius:50%;
  display:block; background:#fff; position:relative;
  border:2px dashed #ccd3f1;
}
.stamp-slot.filled{
  border:2px solid transparent;
  background:
    var(--stamp-url) center/60% 60% no-repeat,
    radial-gradient(closest-side, transparent 70%, #ffffff 71%) center/100% 100% no-repeat,
    #ffffff;
  box-shadow: var(--shadow);
}

.stamp-slot.empty{
  background: radial-gradient(closest-side, #fafbff 70%, transparent 71%) center/100% 100% no-repeat;
}

.stamp-note{ margin:10px 2px 0; font-size:12px }
@media (max-width:480px){
  .stamp-grid{ gap:10px }
}

/* iOS bottom Tabbar */
.tabbar{
  position:sticky; bottom:0; z-index:5;
  display:flex; justify-content:space-around; align-items:center;
  background: rgba(255,255,255,.9); backdrop-filter: blur(12px);
  border-top:1px solid var(--line); padding: 6px 8px calc(6px + var(--safe-bottom,0px));
}
.tab{ display:flex; flex-direction:column; align-items:center; gap:2px; padding:8px 10px; border-radius:12px; text-decoration:none; color:#6b74c0; font-weight:800 }
.tab.on{ background:#eef1ff; color:#435 }
.tab .ico{ font-size:18px }
.tab .txt{ font-size:11px }

/* Debug */
.dbg-toggle{
  position:fixed; right: calc(16px + 56px + 12px); bottom: calc(16px + var(--safe-bottom, 0px)); z-index:9999;
  padding:10px 12px; border:0; border-radius:12px; background:#8ea2ff; color:#fff; font-weight:800; box-shadow: var(--shadow);
  opacity:.92;
}
.dbg-panel{
  position:fixed; right:12px; bottom:60px; width: min(92vw, 480px); height: 40vh;
  background:#fff; color:var(--fg); border:1px solid var(--line); border-radius:12px; 
  z-index:9999; display:flex; flex-direction:column; box-shadow: var(--shadow);
}
.dbg-panel.hidden{ display:none; }
.dbg-head{ display:flex; justify-content:space-between; align-items:center; padding:8px 10px; border-bottom:1px solid var(--line); }
.dbg-head button{ margin-left:6px; padding:6px 10px; border:0; border-radius:10px; background:#7b9cff; color:#fff; }
/* 화면이 아주 좁을 땐 세로로 쌓이게: 디버그 버튼을 FAB 위로 올림 */
@media (max-width: 480px){
  .dbg-toggle{
    right: 16px;
    bottom: calc(16px + 56px + 12px + var(--safe-bottom, 0px));
  }
}
#__dbgArea{
  flex:1; width:100%; background:#f6f7ff; color:#2c2f42;
  border:0; padding:10px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:12px;
  outline:none; resize:none; line-height:1.4;
}
.tabpane{ display:none; }
.tabpane.active{ display:block; }
.stamp{
  /* 화면 폭에 맞춰 자동 줄어듦: 최소 18px ~ 최대 28px */
  font-size: clamp(18px, 5.5vw, 28px);
  line-height: 1;
  display:block;   /* 이모지 잘림 방지 */
  margin: 2px;
}
/* 손님 화면: 다회권 카드 */
.pass-card{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:12px 14px;
  border-radius:14px;
  border:1px solid var(--line);
  background:linear-gradient(135deg,#fdfcff,#f4f7ff);
  box-shadow: var(--shadow);
  font-size:14px;
  font-weight:700;
}

.pass-card .p-name{
  color:#445;
  font-weight:900;
}

.pass-card .p-count{
  background:#eef3ff;
  color:#5460b8;
  font-weight:900;
  padding:6px 10px;
  border-radius:12px;
  min-width:48px;
  text-align:center;
}
.stage-card{
  padding:12px;
  border-radius:14px;
  border:1px solid var(--line);
  background:#fff;
  box-shadow: var(--shadow);
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-size:14px;
  font-weight:700;
  margin-bottom:8px;
}
.stage-card .s-name{ color:#333; }
.stage-card .s-progress{ color:#6b8bff; font-weight:900; }
.stage-card.clear{
  background:linear-gradient(135deg,#fff8dc,#ffe066);
  color:#8a5d00;
}
.stage-card.clear .s-progress::after{
  content:" 🏆✨";
}
.big-qr{
  display:flex;
  justify-content:center;
  align-items:center;
  padding:20px 0;
}
.big-qr canvas, .big-qr img{
  width:140px !important;
  height:140px !important;
}

/* Responsive */
@media (max-width:1180px){
  .app-shell{ padding: 14px 14px; }
}
@media (max-width:1024px){ /* 태블릿 레이아웃 */
  .admin-grid{ grid-template-columns:1fr; }
  .stick-left{ position:relative; top:auto }
  .fab-area{ right:12px }
}
@media (max-width:680px){  /* 스마트폰 최적화 */
  .auth-row{ flex-direction:column; align-items:stretch }
  .grid, .grid.two, .grid.three{ grid-template-columns:1fr }
  .large-title{ font-size:24px }
  .btn{ padding:12px 14px; border-radius:12px }
  .item{ border-radius:12px }
  .member-card .stat{ min-width:104px }
}
@media (max-width: 380px){
  #selfDots.dots{ gap:2px; }
}
@media (max-width: 1024px){
  .quick-register .grid.three{ grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 680px){
  .quick-register .grid.three{ grid-template-columns: 1fr; }
}
/* --------------------------
   관리자: 액션 섹션 반응형 배치
--------------------------- */
.admin-actions{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}
@media (max-width: 1024px){
  .admin-actions{ grid-template-columns: 1fr; }
}

/* 버튼들을 자동으로 칸에 맞춰 크게 */
.btn-grid{
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 8px;
}

/* 라벨 + 숫자입력 + +N/-N 버튼 묶음 (터치 최적화) */
.input-actions{ display: grid; gap: 8px; }
.ia-row{
  display: grid;
  grid-template-columns: 110px minmax(110px, 160px) 1fr;
  gap: 8px;
  align-items: center;
}
.ia-label{
  font-size: 13px; font-weight: 800; color: var(--muted);
}
.ia-row input{
  width: 100%;
}
.ia-buttons{
  display: grid;
  grid-auto-flow: column;
  gap: 8px;
  justify-content: start;
}

/* 다회권: 추가 폼 — 반응형 안전 버전 */
.pass-add-grid{
  display: grid;
  grid-template-columns: minmax(0,1.4fr) 110px minmax(0,1fr) auto; /* 이름 | 수량 | 만료 | 버튼 */
  gap: 8px;
  align-items: center;
}
.pass-add-grid #passName,
.pass-add-grid #passCount,
.pass-add-grid #passExpire{
  width: 100%;
  min-width: 0; /* ← 반드시 필요 (축소 허용) */
}

/* 태블릿: 2열 */
@media (max-width: 900px){
  .pass-add-grid{
    grid-template-columns: minmax(0,1fr) minmax(0,1fr);
  }
  /* 이름 + 수량 한 줄, 만료 + 버튼 한 줄 */
}

/* 스마트폰: 1열 */
@media (max-width: 680px){
  .pass-add-grid{
    grid-template-columns: 1fr;
  }
}


/* 다회권: 조작 영역 (-1/+1 삭제 후) */
.pass-op-grid{
  display: grid;
  grid-template-columns: minmax(0,1fr) 110px auto; /* select | N입력 | 버튼들 */
  gap: 8px;
  align-items: center;
}
.pass-op-grid select{ width:100%; min-width:0; }   /* ← 중요 */
.pass-op-grid input[type="number"]{ width:110px; }
.pass-op-grid .row{ display:flex; flex-wrap:wrap; gap:8px; }
.pass-op-grid .wFull{ grid-column:1 / -1; }

/* 태블릿: 2열 */
@media (max-width: 900px){
  .pass-op-grid{
    grid-template-columns: minmax(0,1fr) minmax(0,1fr);
  }
  .pass-op-grid select,
  .pass-op-grid .wFull{ grid-column: span 2; }
}

/* 스마트폰: 1열 + 큰 터치 타겟 */
@media (max-width: 680px){
  .pass-op-grid{ grid-template-columns: 1fr; }
  .pass-op-grid input[type="number"]{ width:100%; }
  .pass-op-grid .row{ width:100%; }
  .pass-op-grid .row .btn{ flex:1 1 48%; }
}


/* 숫자 입력 기본은 110px, 모바일에선 100%로 */
.pass-op-grid input[type="number"]{
  width: 110px;
}

/* -N / +N 묶음은 줄바꿈 허용 */
.pass-op-grid .row{
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

/* 삭제 버튼은 항상 전체 폭 */
.pass-op-grid .wFull{
  grid-column: 1 / -1;
}

/* 태블릿: 2열로 정렬 (넘침 방지) */
@media (max-width: 900px){
  .pass-op-grid{
    grid-template-columns: minmax(0,1fr) minmax(0,1fr);
  }
  .pass-op-grid select{ grid-column: span 2; }
  .pass-op-grid .wFull{ grid-column: span 2; }
}

/* 스마트폰: 완전 1열 */
@media (max-width: 680px){
  .pass-op-grid{
    grid-template-columns: 1fr;
  }
  .pass-op-grid select{ grid-column: 1; }
  .pass-op-grid input[type="number"]{
    width: 100%;
  }
  .pass-op-grid .row{
    width: 100%;
    justify-content: stretch;
  }
  .pass-op-grid .row .btn{
    flex: 1 1 48%;   /* -N / +N 반반 */
  }
  .pass-op-grid .wFull{
    grid-column: 1;
  }
}

/* 스마트폰에서 완전 1열 + 큰 터치 타겟 */
@media (max-width: 560px){
  .ia-row{
    grid-template-columns: 1fr;
  }
  .ia-buttons{
    grid-auto-flow: row;
    grid-template-columns: 1fr 1fr;
  }
  .btn-grid{ grid-template-columns: 1fr; }
}

/* 보유 다회권 / 스테이지 기록 리스트는 스크롤 가능 */
#passList, #stageList{
  max-height: 300px;
  overflow: auto;
}

/* 입력/버튼 터치 영역 살짝 키우기 */
input, select{
  min-height: 42px;
}
.btn{
  min-height: 42px;
}

/* (이미 있었던) passExpire 폭 보장과 모바일 전체폭 */
#passExpire{
  width: 200px;
  min-width: 200px;
}
@media (max-width:680px){
  #passExpire{ width: 100%; min-width: 0; }
}
.p-remain {
  color: #ff6b81;   /* 파스텔톤 붉은색 */
  font-weight: 900;
  font-size: 13px;
  margin-left: 6px;
}
.p-remain.expired {
  color: #aaa;
}
/* =========================
   Tablet (<=1024px) 레이아웃 개선
   - 관리자 상세: 스탬프/무료권, 다회권, 하단 2분할(보유 다회권/스테이지) 모두 1열로
   - 내부 폼/버튼도 줄바꿈되어 터치 영역 확보
========================= */
@media (max-width: 1024px){
  /* 관리자 좌/우는 이미 1열이지만, 상세 안의 2열 그리드를 1열로 */
  .grid.two{
    grid-template-columns: 1fr;       /* '보유 다회권' / '스테이지 기록'도 세로 배치 */
  }

  /* 다회권 입력/조작 폼도 태블릿에선 1열로 넓게 */
  .pass-add-grid{
    grid-template-columns: 1fr;       /* 권종명 / 수량 / 만료일 / 버튼 모두 세로 */
  }
  .pass-op-grid{
    grid-template-columns: 1fr;       /* 선택 셀렉트 / N 입력 / -N,+N 버튼 묶음 세로 */
  }
  .pass-op-grid input[type="number"]{
    width: 100%;                       /* 숫자 입력 가로 꽉 차게 */
  }
  .pass-op-grid .row{
    width: 100%;
    flex-wrap: wrap;
  }
  .pass-op-grid .row .btn{
    flex: 1 1 48%;                     /* -N / +N 반반 배치(줄바꿈 가능) */
  }

  /* 섹션 안 버튼/줄들이 너무 붙지 않도록 */
  #memberSection .section-card .row{
    flex-wrap: wrap;
  }
}
/* Seg-header: 탭 + QR 버튼 줄 */
.seg-head{
  display:flex; justify-content:space-between; align-items:center; gap:8px; flex-wrap:wrap;
}

/* QR 모달 */
.qr-modal{
  position:fixed; inset:0; z-index:2000;
  display:flex; align-items:center; justify-content:center;
  background: rgba(0,0,0,.45);
}
.qr-modal.hidden{ display:none; }
.qr-sheet{
  width:min(92vw,520px); background:#fff; border-radius:16px; padding:12px;
  box-shadow: var(--shadow);
}
#qrVideo{
  width:100%; display:block; border-radius:12px; background:#000;
}
/* QR 스캔 버튼 강조 */
.btn.highlight{
  background: linear-gradient(135deg, #ff9ca0, #ff5c70); /* 파스텔톤 붉은-핑크 */
  color:#fff;
  font-weight:900;
  box-shadow: 0 4px 12px rgba(255,80,100,.35);
  border:0;
}
.btn.highlight:hover{
  filter: brightness(1.05);
}

